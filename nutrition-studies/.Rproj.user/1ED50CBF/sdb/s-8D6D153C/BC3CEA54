{
    "contents" : "# Diet P-hacking\n# Andrew Flowers <andrew.flowers@fivethirtyeight.com>\n\nsetwd(\"~/private-data//dieting-project/\")\n\nrequire(readr)\nrequire(plyr)\nrequire(dplyr)\nrequire(tidyr)\n\nrawData <- read.csv(\"raw_anonymized_data.csv\")\n\n# Fix innie/out characteristics\n\nrawData$belly <- revalue(rawData$belly, c(\"Innie\"=\"Yes\", \"Outie\"=\"No\"))\n\n# FFQ variable names (should total 1066)\n\nffq <- names(rawData)[28:1093]\n\n# Characteristic variable names (should total 26)\n\ncharacteristics <- names(rawData)[2:27]\n\n# Linear regressions with respondent characteristic predicting food frequency\n\nregValues <- data.frame(food=ffq)\n\nfor (c in characteristics) regValues[,c] <- NA # Add characteristics as blank columns to regValues data frame\n\nfor (f in ffq){\n  for (c in characteristics){\n    \n    frm <- formula(paste0(f, \"~\", c))\n    reg <-  summary(lm(data=rawData, formula=frm))\n    regValues[which(regValues$food==f), c]  <- reg$coefficients[8]\n  }\n}\n\n# Extract p-values\n\nregAnalysis <- regValues %>%\n  gather(\"characteristic\", \"p_values\", 2:27) %>% \n  arrange(p_values)\n\n# Write out p-values\n\nwrite_csv(regAnalysis, \"p_values_analysis.csv\")\n\n# Note: This is an intentionally shady regression analysis. Both because of the \"p-hacking\" or \n# \"data mining\" behind running over 27,000 regresison, but also in that only the statistics reported \n# were the p-values of the characteristics (the independent variables).\n\n# IN OTHER WORDS: DO NOT TRY THIS AT HOME (AKA, THIS IS NOT AN EXAMPLE OF SOUND DATA ANALYSIS)\n",
    "created" : 1450735440535.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2220922350",
    "id" : "BC3CEA54",
    "lastKnownWriteTime" : 1452010952,
    "path" : "~/private-data/dieting-project/diet_p_hacking_final.R",
    "project_path" : "diet_p_hacking_final.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}